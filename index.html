<!-- FoodBooth Filter — Toss‑style one‑file demo landing (KR/EN). No external libs. -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FoodBooth Filter — 당신이 먹을 수 있는 음식만 | Only what you can eat</title>
  <meta name="description" content="QR 한 번으로 할랄·비건·알레르기·맵기를 즉시 필터링하고 상태 라벨(적합/주의/부적합)로 안내하며 대체 부스까지 추천하는 행사·축제용 웹앱 데모." />
  <meta property="og:title" content="FoodBooth Filter" />
  <meta property="og:description" content="QR → status labels · Halal · Vegan · Allergy · Spicy · Alternative booths · No app" />
  <meta property="og:type" content="website" />
  <meta name="theme-color" content="#2d5cf6" />
  <style>
    :root{
      --bg:#ffffff;--ink:#0f172a;--muted:#64748b;--line:#e5e7eb;--card:#f8fafc;--primary:#2d5cf6;--primary-ink:#ffffff;
      --ok:#16a34a;--warn:#f59e0b;--bad:#ef4444;--shadow:0 10px 30px rgba(2,6,23,.08);
      --radius:22px;--radius-sm:14px;--radius-lg:28px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:-apple-system,BlinkMacSystemFont,'Apple SD Gothic Neo','Noto Sans KR','Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;line-height:1.5}
    a{color:var(--primary);text-decoration:none}
    .container{max-width:1120px;margin:0 auto;padding:0 20px}
    .btn{display:inline-flex;gap:8px;align-items:center;justify-content:center;padding:14px 20px;border-radius:16px;background:var(--primary);color:var(--primary-ink);font-weight:700;border:1px solid #1e40af;box-shadow:var(--shadow);transition:.2s}
    .btn:hover{transform:translateY(-1px);filter:brightness(1.02)}
    .btn.ghost{background:#eef2ff;border-color:#c7d2fe;color:#1e40af}
    .badge{padding:6px 10px;background:#eef2ff;color:#1e40af;border-radius:999px;font-weight:700;font-size:12px;border:1px solid #c7d2fe}
    header{position:sticky;top:0;backdrop-filter:saturate(180%) blur(10px);background:rgba(255,255,255,.8);border-bottom:1px solid var(--line);z-index:50}
    .nav{display:flex;align-items:center;justify-content:space-between;height:64px}
    .nav .logo{display:flex;align-items:center;gap:10px;font-weight:800}
    .nav ul{display:flex;gap:18px;list-style:none;margin:0;padding:0}
    .nav a{padding:10px 12px;border-radius:12px;color:var(--ink)}
    .nav a:hover{background:#f1f5f9}
    .hamburger{display:none;background:transparent;border:1px solid var(--line);padding:8px;border-radius:10px}
    .hamburger svg{width:22px;height:22px}

    /* Drawer */
    .drawer{position:fixed;top:0;right:0;height:100%;width:300px;background:var(--bg);border-left:1px solid var(--line);transform:translateX(100%);transition:transform .25s ease;z-index:120;padding:20px}
    .drawer.open{transform:translateX(0)}
    .drawer .menu{display:flex;flex-direction:column;gap:12px;margin-top:12px}
    .drawer .menu a,.drawer .menu button{padding:12px 14px;border-radius:12px;border:1px solid var(--line);background:#fff;text-align:left}
    .drawer-mask{position:fixed;inset:0;background:rgba(15,23,42,.4);opacity:0;pointer-events:none;transition:opacity .2s;z-index:110}
    .drawer-mask.show{opacity:1;pointer-events:auto}

    /* Hero */
    .hero{position:relative;overflow:hidden}
    .hero .wrap{display:grid;grid-template-columns:1.15fr .85fr;gap:28px;align-items:center;padding:78px 0}
    .hero h1{font-size:46px;line-height:1.12;margin:0 0 14px;font-weight:900;letter-spacing:-.5px}
    .hero p{font-size:18px;color:var(--muted);margin:0 0 22px}
    .hero .cta{display:flex;gap:12px;flex-wrap:wrap}
    .hero .mock{background:linear-gradient(180deg,#ebf2ff,transparent 55%), var(--card);border:1px solid var(--line);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow)}
    .hero .kpis{display:flex;gap:16px;margin-top:14px;flex-wrap:wrap}
    .kpi{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:10px 12px;font-size:13px;color:#1f2937}

    /* Sections */
    section{padding:70px 0;border-top:1px solid var(--line)}
    h2{font-size:32px;letter-spacing:-.3px;margin:0 0 14px}
    .sub{color:var(--muted);margin:0 0 22px}
    .grid{display:grid;gap:18px}
    .cols-3{grid-template-columns:repeat(3,1fr)}
    .cols-2{grid-template-columns:repeat(2,1fr)}
    .card{background:var(--card);border:1px solid var(--line);border-radius:var(--radius-sm);padding:22px;box-shadow:var(--shadow)}
    .card h3{margin:6px 0 8px;font-size:20px}
    .dim{color:var(--muted)}

    /* Demo modal */
    .overlay{position:fixed;inset:0;background:rgba(15,23,42,.48);display:none;align-items:center;justify-content:center;padding:18px;z-index:100}
    .overlay.open{display:flex}
    .overlay, .overlay.open {
      overflow-y: auto;
    }
    .modal{background:var(--bg);border-radius:20px;max-width:1100px;width:100%;border:1px solid var(--line);box-shadow:0 20px 50px rgba(2,6,23,.18)}
    .modal {
      max-height:90vh;
      overflow-y:auto;
    }
    .modal header.modalhead{position:sticky;top:0;background:var(--bg);border-bottom:1px solid var(--line);z-index:5;height:72px;display:flex;align-items:center;justify-content:space-between;padding:0 24px;}
    .modal .closeX{position:absolute;top:18px;right:18px;width:48px;height:48px;display:flex;align-items:center;justify-content:center;font-size:28px;}
    .modal .closeX svg{width:32px;height:32px;}
    .modal .body{display:grid;grid-template-columns:340px 1fr;gap:24px;padding:18px 24px 28px;}
    @media (max-width: 700px) {
      .modal{max-width:98vw;width:98vw;}
      .modal .body{grid-template-columns:1fr;padding:12px 8px 18px;gap:12px;}
      .modal header.modalhead{height:62px;padding:0 10px;}
      .modal .closeX{top:10px;right:10px;width:40px;height:40px;}
      .modal .closeX svg{width:24px;height:24px;}
    }
    .pill{display:inline-flex;align-items:center;gap:8px;padding:8px 10px;border-radius:999px;border:1px solid var(--line);background:#fff}
    .switch{position:relative;width:44px;height:26px;background:#e5e7eb;border-radius:999px;border:1px solid var(--line);cursor:pointer}
    .switch:before{content:"";position:absolute;width:20px;height:20px;border-radius:50%;background:white;top:2px;left:2px;transition:.2s;box-shadow:0 2px 8px rgba(2,6,23,.15)}
    .switch[data-on="true"]{background:#c7d2fe;border-color:#93c5fd}
    .switch[data-on="true"]:before{left:22px}
    .range{width:100%}
    .list{display:grid;gap:12px}
    .row{display:flex;align-items:center;gap:12px;justify-content:space-between;border:1px solid var(--line);background:#fff;border-radius:14px;padding:12px 14px}
    .row .name{font-weight:700}
    .status{display:inline-flex;align-items:center;gap:8px;font-weight:800}
    .status svg{width:18px;height:18px}
    .ok{color:var(--ok)} .warn{color:var(--warn)} .bad{color:var(--bad)}
    .dockfoot{position:sticky;bottom:0;background:linear-gradient(180deg,rgba(255,255,255,0),var(--bg) 45%);padding:10px 0 0;margin-top:8px;border-top:1px solid var(--line)}
    .iconbtn{display:inline-flex;align-items:center;justify-content:center;width:42px;height:42px;border-radius:12px;border:1px solid var(--line);background:#fff;box-shadow:var(--shadow);color:#0f172a}
    .iconbtn:hover{transform:translateY(-1px);filter:brightness(0.98)}

    /* Sticker poll */
    .poll{display:flex;gap:12px}
    .chip{flex:1;padding:14px;border:1px dashed var(--line);border-radius:14px;text-align:center;background:#fff;cursor:pointer}
    .chip.active{border-style:solid;border-color:#94a3b8;background:#f8fafc}
    .bar{height:10px;background:#e5e7eb;border-radius:999px;overflow:hidden}
    .bar>span{display:block;height:100%;background:var(--primary)}

    /* Footer */
    footer{padding:40px 0;border-top:1px solid var(--line);color:var(--muted)}

    /* Responsive */
    @media (max-width: 980px){
      .hero .wrap{grid-template-columns:1fr;gap:20px;padding:50px 0}
      .hero h1{font-size:38px}
      .modal .body{grid-template-columns:1fr}
      .cols-3{grid-template-columns:1fr}
      .cols-2{grid-template-columns:1fr}
      .hamburger{display:inline-flex}
      header .nav ul{display:none}
    }
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="logo" aria-label="FoodBooth Filter">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 3c4.97 0 9 4.03 9 9 0 4.97-4.03 9-9 9S3 16.97 3 12C3 7.03 7.03 3 12 3Zm0 3.2a5.8 5.8 0 1 0 0 11.6 5.8 5.8 0 0 0 0-11.6Z" fill="#2d5cf6"/></svg>
        FoodBooth Filter
      </div>
      <nav aria-label="주 메뉴">
        <ul>
          <li><a href="#feature">특징</a></li>
          <li><a href="#how">작동 방식</a></li>
          <li><a href="#poc">현장 검증</a></li>
          <li><a href="#contact">문의</a></li>
          <li><button id="lang" class="btn ghost" aria-label="언어 전환">KR</button></li>
        </ul>
      </nav>
      <button id="menuBtn" class="hamburger" aria-label="메뉴 열기" aria-controls="drawer" aria-expanded="false">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M3 6h18M3 12h18M3 18h18"/></svg>
      </button>
    </div>
  </header>

  <!-- Mobile Drawer -->
  <div id="drawer" class="drawer" role="dialog" aria-modal="true" aria-label="모바일 메뉴">
    <div class="logo" style="gap:8px"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true"><circle cx="12" cy="12" r="9" fill="#2d5cf6"/></svg> Menu</div>
    <div class="menu">
      <a href="#feature">특징</a>
      <a href="#how">작동 방식</a>
      <a href="#poc">현장 검증</a>
      <a href="#contact">문의</a>
      <button id="lang2">KR</button>
      <button id="closeDrawer" class="btn ghost" style="margin-top:8px">닫기</button>
    </div>
  </div>
  <div id="drawerMask" class="drawer-mask" aria-hidden="true"></div>

  <main>
    <section class="hero">
      <div class="container wrap">
        <div>
          <span class="badge">Demo</span>
          <h1>당신이 먹을 수 있는 음식만</h1>
          <p>QR 한 번으로 <b>할랄·비건·알레르기·맵기</b>를 즉시 필터링하고, 각 부스의 상태를 <b>적합 · 주의 · 부적합</b>으로 명확히 안내합니다. 대체 부스도 자동 추천합니다. 앱 설치는 필요 없습니다.</p>
          <div class="cta">
            <button class="btn" id="openDemo">데모 열기</button>
            <a class="btn ghost" href="#how">작동 방식 보기</a>
          </div>
          <div class="kpis" aria-label="quick facts">
            <div class="kpi">No App · QR to Web</div>
            <div class="kpi">KR/EN/AR/ES 준비</div>
            <div class="kpi">상태 라벨 가시적 표시</div>
          </div>
        </div>
        <div class="mock" aria-label="demo preview">
          <div class="card" style="margin-bottom:12px">
            <div class="pill"><strong>필터</strong> · Halal · Vegan · Allergy · Spicy</div>
            <p class="dim" style="margin:8px 0 0">부스 리스트에 상태 라벨이 바로 반영됩니다.</p>
          </div>
          <div class="grid" style="grid-template-columns:1fr;gap:10px">
            <div class="row"><span class="name">Chicken BBQ</span> <span class="status bad"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="2"/><path d="M15 9l-6 6m0-6l6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg><span class="label">부적합</span></span></div>
            <div class="row"><span class="name">Soy Noodle</span> <span class="status ok"><svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg><span class="label">적합</span></span></div>
            <div class="row"><span class="name">Seafood Pancake</span> <span class="status warn"><svg viewBox="0 0 24 24"><path d="M12 2l10 18H2L12 2z" fill="none" stroke="currentColor" stroke-width="2"/><path d="M12 8v6m0 4h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg><span class="label">주의</span></span></div>
          </div>
        </div>
      </div>
    </section>

    <section id="feature">
      <div class="container">
        <h2>핵심 특징</h2>
        <p class="sub">행사장 곳곳의 메뉴판을 뒤질 필요 없이, 한 화면에서 즉시 확인하고 이동합니다.</p>
        <div class="grid cols-3">
          <div class="card">
            <div class="pill">상태 라벨 즉시 표시</div>
            <h3>원터치 필터링</h3>
            <p class="dim">할랄·비건·알레르기·맵기(Spicy Level)를 한 번에 적용하여, <b>적합/주의/부적합</b>을 색상·아이콘·텍스트로 명확히 표현합니다.</p>
          </div>
          <div class="card">
            <div class="pill">Auto</div>
            <h3>대체 부스 추천</h3>
            <p class="dim">현재 부스가 부적합일 때 가까운 적합 후보를 자동 추천해 동선을 줄여줍니다.</p>
          </div>
          <div class="card">
            <div class="pill">A11y</div>
            <h3>다국어 & 접근성</h3>
            <p class="dim">KR/EN 우선, AR/ES 확장. 큰 글씨·명확한 대비·스크린리더 레이블로 누구나 쉽게.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="how">
      <div class="container">
        <h2>작동 방식</h2>
        <p class="sub">행사 당일, QR만 비추면 바로 웹앱이 열립니다.</p>
        <div class="grid cols-2">
          <div class="card">
            <h3>사용자 플로우</h3>
            <ol class="dim" style="padding-left:18px">
              <li>행사 입구/지점의 QR 스캔</li>
              <li>내 식단 설정: Halal / Vegan / 알레르기 / 맵기</li>
              <li>부스 리스트에 상태 라벨 적용</li>
              <li>부적합 시, 근처 적합 부스 자동 추천</li>
            </ol>
          </div>
          <div class="card">
            <h3>운영자/판매자 플로우</h3>
            <ol class="dim" style="padding-left:18px">
              <li>메뉴 성분/조리 정보 간단 입력(스프레드시트/폼)</li>
              <li>현장 QR 포스터 출력</li>
              <li>실시간 수정 시 즉시 반영</li>
              <li>행사 종료 후 리포트로 인사이트 확인</li>
            </ol>
          </div>
        </div>
      </div>
    </section>

    <section id="poc">
      <div class="container">
        <h2>현장 검증(오늘)</h2>
        <p class="sub">코엑스에서 외국인 관광객 인터뷰와 스티커 설문으로 문제와 니즈를 확인했습니다.</p>
        <div class="grid cols-2">
          <div class="card">
            <h3>인사이트</h3>
            <ul class="dim" style="padding-left:18px">
              <li>한국에서 비건/할랄/알레르기 이용자가 먹을 수 있는 메뉴 탐색이 어렵다.</li>
              <li>한국인의 “안 매움”과 외국인의 체감 매움이 달라 <b>맵기 표준화</b>가 필요하다.</li>
            </ul>
          </div>
          <div class="card">
            <h3>스티커 설문(현장 재현)</h3>
            <p class="dim">오늘의 스티커 보드를 웹으로 재현했습니다. 클릭해 보세요(로컬 저장).</p>
            <div class="poll" role="group" aria-label="어려움 정도">
              <button class="chip" data-key="easy">쉬움</button>
              <button class="chip" data-key="medium">보통</button>
              <button class="chip" data-key="hard">어려움</button>
            </div>
            <div style="margin-top:10px" class="dim">결과</div>
            <div class="bar" aria-hidden="true"><span id="bar" style="width:0%"></span></div>
            <div id="poll-summary" class="dim" style="margin-top:8px">투표 없음</div>
          </div>
        </div>
      </div>
    </section>

    <section id="contact">
      <div class="container">
        <h2>문의</h2>
        <p class="sub">행사·축제에서 바로 써볼 수 있는 파트너를 찾고 있습니다.</p>
        <div class="card">
          <p style="margin:0 0 10px" class="dim">이메일: <a href="mailto:team@example.com">team@example.com</a> (예시 값을 프로젝트 메일로 교체하세요)</p>
          <button class="btn" id="openDemo2">데모 다시 보기</button>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">© <span id="yy"></span> FoodBooth Filter — “Only what you can eat.”</div>
  </footer>

  <!-- Demo Modal -->
  <div class="overlay" id="demo">
    <div class="modal">
      <header class="modalhead" style="position:relative">
        <div class="container nav" style="height:60px">
          <div class="logo">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true"><circle cx="12" cy="12" r="9" fill="#2d5cf6"/></svg>
            Demo — 필터 적용 미리보기
          </div>
        </div>
        <button id="closeX" class="iconbtn closeX" aria-label="닫기">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M6 6l12 12M18 6L6 18"/></svg>
        </button>
      </header>
      <div class="body">
        <aside class="card" aria-label="필터">
          <h3>내 식단 설정</h3>
          <div class="grid" style="grid-template-columns:1fr auto;align-items:center;gap:10px">
            <div>Halal</div><div class="switch" data-key="halal" data-on="false" tabindex="0" role="switch" aria-checked="false"></div>
            <div>Vegan</div><div class="switch" data-key="vegan" data-on="false" tabindex="0" role="switch" aria-checked="false"></div>
            <div>견과 알레르기</div><div class="switch" data-key="nuts" data-on="false" tabindex="0" role="switch" aria-checked="false"></div>
            <div>유제품 알레르기</div><div class="switch" data-key="dairy" data-on="false" tabindex="0" role="switch" aria-checked="false"></div>
            <div>갑각류 알레르기</div><div class="switch" data-key="shellfish" data-on="false" tabindex="0" role="switch" aria-checked="false"></div>
          </div>
          <div style="margin-top:14px">
            <label for="spicy"><strong>맵기 허용</strong> (<span id="spicyLabel">보통</span>)</label>
            <input id="spicy" class="range" type="range" min="0" max="3" step="1" value="2" />
            <div class="dim" style="display:flex;justify-content:space-between"><span>순함</span><span>보통</span><span>매움</span><span>아주 매움</span></div>
          </div>
        </aside>
        <section>
          <div class="card" style="margin-bottom:12px">
            <h3>부스 리스트</h3>
            <p class="dim" style="margin:6px 0 0">조건에 따라 상태가 변합니다. 부적합일 때는 아래에 대체 추천이 표시됩니다.</p>
          </div>
          <div id="list" class="list" aria-live="polite"></div>
          <div class="card" id="alt" style="margin-top:14px;display:none">
            <h3>대체 부스 추천</h3>
            <div id="altList" class="list"></div>
            <div class="dockfoot" style="text-align:right">
              <button id="closeBottom" class="btn ghost">닫기</button>
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>

  <script>
    // Footer year
    document.getElementById('yy').textContent = new Date().getFullYear();

    // Icons (inline SVG strings)
    const ICON = {
      ok:'<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M20 6L9 17l-5-5" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>',
      warn:'<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2l10 18H2L12 2z" fill="none" stroke="currentColor" stroke-width="2"/><path d="M12 8v6m0 4h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>',
      bad:'<svg viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="2"/><path d="M15 9l-6 6m0-6l6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>'
    };

    // Language toggle (KR/EN)
    const i18n = {
      KR:{
        heroTitle:'당신이 먹을 수 있는 음식만',
        heroDesc:'QR 한 번으로 <b>할랄·비건·알레르기·맵기</b>를 즉시 필터링하고, 각 부스의 상태를 <b>적합 · 주의 · 부적합</b>으로 명확히 안내합니다. 대체 부스도 자동 추천합니다. 앱 설치는 필요 없습니다.',
        demo:'데모 열기', how:'작동 방식 보기',
        labels:{ok:'적합', warn:'주의', bad:'부적합'}
      },
      EN:{
        heroTitle:'Only what you can eat',
        heroDesc:'With one QR, instantly filter for <b>Halal · Vegan · Allergens · Spicy</b>. Each booth is labeled <b>OK · Caution · Not suitable</b>, with automatic alternatives. No app required.',
        demo:'Open Demo', how:'See how it works',
        labels:{ok:'OK', warn:'Caution', bad:'Not suitable'}
      }
    };
    let LANG = 'KR';
    const langBtn = document.getElementById('lang');
    const langBtn2 = document.getElementById('lang2');
    function setLang(next){
      LANG = next; const t = i18n[next];
      document.querySelector('.hero h1').innerHTML = t.heroTitle;
      document.querySelector('.hero p').innerHTML = t.heroDesc;
      document.getElementById('openDemo').textContent = t.demo;
      document.querySelector('.hero .cta a').textContent = t.how;
      langBtn.textContent = next; if(langBtn2) langBtn2.textContent = next;
      render(); // re-render labels in the demo list
    }
    langBtn.addEventListener('click',()=> setLang(LANG==='KR'?'EN':'KR'));
    if(langBtn2) langBtn2.addEventListener('click',()=> setLang(LANG==='KR'?'EN':'KR'));

    // Drawer toggle
    const drawer = document.getElementById('drawer');
    const mask = document.getElementById('drawerMask');
    const menuBtn = document.getElementById('menuBtn');
    const closeDrawerBtn = document.getElementById('closeDrawer');
    function openDrawer(){ drawer.classList.add('open'); mask.classList.add('show'); menuBtn.setAttribute('aria-expanded','true'); document.body.style.overflow='hidden'; }
    function closeDrawer(){ drawer.classList.remove('open'); mask.classList.remove('show'); menuBtn.setAttribute('aria-expanded','false'); document.body.style.overflow=''; }
    menuBtn.addEventListener('click', openDrawer);
    mask.addEventListener('click', closeDrawer);
    closeDrawerBtn.addEventListener('click', closeDrawer);
    drawer.querySelectorAll('a').forEach(a=> a.addEventListener('click', closeDrawer));
    window.addEventListener('keydown',e=>{ if(e.key==='Escape') closeDrawer(); });

    // Demo modal open/close
    const openDemo = () => document.getElementById('demo').classList.add('open');
    const closeDemo = () => document.getElementById('demo').classList.remove('open');
    document.getElementById('openDemo').onclick = openDemo;
    document.getElementById('openDemo2').onclick = openDemo;
    document.getElementById('closeX').onclick = closeDemo;
    const closeBottom = document.getElementById('closeBottom');
    if(closeBottom) closeBottom.onclick = closeDemo;
    document.getElementById('demo').addEventListener('click',e=>{ if(e.target.id==='demo') closeDemo(); });
    window.addEventListener('keydown',e=>{ if(e.key==='Escape') closeDemo(); });

    // Sample booths dataset
    const booths = [
      {name:'Chicken BBQ', pork:false, alcohol:true, seafood:false, usesFishOil:false, vegan:false, halal:false, spicy:3, allergens:['dairy'], cross:true},
      {name:'Soy Noodle', pork:false, alcohol:false, seafood:false, usesFishOil:false, vegan:true, halal:true, spicy:1, allergens:['nuts'], cross:false},
      {name:'Seafood Pancake', pork:false, alcohol:false, seafood:true, usesFishOil:true, vegan:false, halal:true, spicy:2, allergens:['shellfish'], cross:true},
      {name:'Beef Bulgogi', pork:false, alcohol:true, seafood:false, usesFishOil:false, vegan:false, halal:false, spicy:1, allergens:['soy'], cross:false},
      {name:'Tofu Bibimbap', pork:false, alcohol:false, seafood:false, usesFishOil:false, vegan:true, halal:true, spicy:2, allergens:['sesame'], cross:false},
      {name:'Fried Shrimp', pork:false, alcohol:false, seafood:true, usesFishOil:false, vegan:false, halal:true, spicy:2, allergens:['shellfish','gluten'], cross:false},
      {name:'Kimchi Stew', pork:true, alcohol:false, seafood:false, usesFishOil:false, vegan:false, halal:false, spicy:3, allergens:['fish'], cross:false}
    ];

    // User prefs state
    const prefs = {halal:false, vegan:false, nuts:false, dairy:false, shellfish:false, spicy:2};

    const spicyText = ['순함','보통','매움','아주 매움'];
    const list = document.getElementById('list');
    const altWrap = document.getElementById('alt');
    const altList = document.getElementById('altList');

    function statusFor(booth){
      // Hard rules
      if(prefs.vegan && !booth.vegan) return 'bad';
      if(prefs.halal && (!booth.halal || booth.pork || booth.alcohol || booth.usesFishOil)) return 'bad';
      if(prefs.nuts && (booth.allergens||[]).includes('nuts')) return 'bad';
      if(prefs.dairy && (booth.allergens||[]).includes('dairy')) return 'bad';
      if(prefs.shellfish && (booth.allergens||[]).includes('shellfish')) return 'bad';
      if(booth.spicy > prefs.spicy) return 'bad';
      // Caution
      if(booth.cross || booth.alcohol || booth.usesFishOil) return 'warn';
      // OK
      return 'ok';
    }

    function statusChip(type){
      const label = i18n[LANG].labels[type];
      return `<span class="status ${type}">${ICON[type]}<span class="label">${label}</span></span>`;
    }

    function render(){
      list.innerHTML = '';
      altList.innerHTML = '';
      let hasBad = false;
      const okBooths = [];
      booths.forEach(b=>{
        const s = statusFor(b);
        const row = document.createElement('div');
        row.className = 'row';
        row.innerHTML = `<div><div class=\"name\">${b.name}</div><div class=\"dim\">맵기: ${spicyText[b.spicy]}${b.cross? ' · 교차오염 가능':' '}</div></div>`+
                        `${statusChip(s)}`;
        list.appendChild(row);
        if(s==='bad') hasBad = true; else if(s==='ok') okBooths.push(b);
      });
      if(hasBad && okBooths.length){
        altWrap.style.display = '';
        okBooths.slice(0,3).forEach(b=>{
          const r = document.createElement('div');
          r.className='row';
          r.innerHTML = `<span class=\"name\">${b.name}</span>${statusChip('ok')}`;
          altList.appendChild(r);
        });
      } else {
        altWrap.style.display = 'none';
      }
    }

    // init switches
    document.querySelectorAll('.switch').forEach(sw=>{
      sw.addEventListener('click',()=>{
        const key=sw.dataset.key; const v=!(sw.getAttribute('data-on')==='true');
        sw.setAttribute('data-on',v); sw.setAttribute('aria-checked',String(v));
        prefs[key]=v; render();
      });
      sw.addEventListener('keydown',e=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); sw.click(); } });
    });
    const spicy = document.getElementById('spicy');
    const spicyLabel = document.getElementById('spicyLabel');
    spicy.addEventListener('input',()=>{ prefs.spicy = Number(spicy.value); spicyLabel.textContent = spicyText[prefs.spicy]; render(); });

    // Sticker poll
    const chips = document.querySelectorAll('.chip');
    const POLL_KEY = 'fbf_sticker_poll';
    const poll = JSON.parse(localStorage.getItem(POLL_KEY) || '{"easy":0,"medium":0,"hard":0}');
    const bar = document.getElementById('bar');
    const summary = document.getElementById('poll-summary');
    function paintPoll(){
      const total = poll.easy+poll.medium+poll.hard;
      const pct = total? Math.round(((poll.hard)/total)*100):0;
      bar.style.width = pct+'%';
      summary.textContent = total? `쉬움 ${poll.easy} · 보통 ${poll.medium} · 어려움 ${poll.hard}`: '투표 없음';
    }
    chips.forEach(c=>{
      c.addEventListener('click',()=>{ poll[c.dataset.key]++; localStorage.setItem(POLL_KEY, JSON.stringify(poll)); chips.forEach(x=>x.classList.remove('active')); c.classList.add('active'); paintPoll(); });
    });

    // First paints
    paintPoll();
    render();
  </script>
</body>
</html>
